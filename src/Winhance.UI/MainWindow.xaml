<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="Winhance.UI.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Winhance.UI"
    xmlns:controls="using:Winhance.UI.Features.Common.Controls"
    Title="Winhance">

    <Grid x:Name="RootGrid" Loaded="RootGrid_Loaded">
        <Grid.RowDefinitions>
            <RowDefinition Height="48"/>  <!-- TitleBar -->
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Title Bar Area -->
        <Grid x:Name="AppTitleBar" Height="48" Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition x:Name="LeftPaddingColumn" Width="0"/>
                <ColumnDefinition x:Name="ToggleColumn" Width="Auto"/>
                <ColumnDefinition x:Name="IconColumn" Width="Auto"/>
                <ColumnDefinition x:Name="TitleColumn" Width="Auto"/>
                <ColumnDefinition x:Name="DragColumn" Width="*"/>
                <ColumnDefinition x:Name="ButtonsColumn" Width="Auto"/>
                <ColumnDefinition x:Name="RightPaddingColumn" Width="0"/>
            </Grid.ColumnDefinitions>

            <!-- Navigation Toggle Button (Hamburger) -->
            <Button x:Name="PaneToggleButton"
                    Grid.Column="1"
                    Click="PaneToggleButton_Click"
                    Style="{StaticResource TitleBarButtonStyle}"
                    ToolTipService.ToolTip="Toggle Navigation"
                    Margin="4,0,0,0">
                <FontIcon Glyph="&#xE700;" FontSize="16"/>
            </Button>

            <!-- App Icon -->
            <Image x:Name="AppIcon"
                   Grid.Column="2"
                   Width="20" Height="20"
                   Margin="8,0,8,0"
                   VerticalAlignment="Center"/>

            <!-- App Title and Subtitle -->
            <StackPanel Grid.Column="3"
                        Orientation="Horizontal"
                        VerticalAlignment="Center"
                        Spacing="6">
                <TextBlock x:Name="AppTitleTextBlock"
                           Text="Winhance"
                           FontSize="12"
                           FontWeight="SemiBold"
                           VerticalAlignment="Center"/>
                <TextBlock x:Name="AppSubtitleTextBlock"
                           Text="by Memory"
                           FontSize="11"
                           Opacity="0.6"
                           VerticalAlignment="Center"/>
            </StackPanel>

            <!-- Title Bar Action Buttons -->
            <StackPanel x:Name="TitleBarButtons"
                        Grid.Column="5"
                        Orientation="Horizontal"
                        VerticalAlignment="Center"
                        Margin="0,0,8,0"
                        Spacing="2">

                <!-- Save Configuration Button -->
                <Button x:Name="SaveConfigButton"
                        Style="{StaticResource TitleBarButtonStyle}"
                        ToolTipService.ToolTip="Save Configuration">
                    <FontIcon Glyph="&#xE74E;" FontSize="14"/>
                </Button>

                <!-- Import Configuration Button -->
                <Button x:Name="ImportConfigButton"
                        Style="{StaticResource TitleBarButtonStyle}"
                        ToolTipService.ToolTip="Import Configuration">
                    <FontIcon Glyph="&#xE8B7;" FontSize="14"/>
                </Button>

                <!-- Windows Version Filter Button -->
                <Button x:Name="WindowsFilterButton"
                        Style="{StaticResource TitleBarButtonStyle}"
                        ToolTipService.ToolTip="Windows Version Filter">
                    <Viewbox Width="14" Height="14">
                        <PathIcon x:Name="WindowsFilterIcon" Data="{StaticResource FilterCheckIconPath}" Foreground="{ThemeResource TextFillColorPrimaryBrush}"/>
                    </Viewbox>
                </Button>

                <!-- Donate Button -->
                <Button x:Name="DonateButton"
                        Style="{StaticResource TitleBarButtonStyle}"
                        ToolTipService.ToolTip="Donate">
                    <FontIcon Glyph="&#xE00B;" FontSize="14" Foreground="#FFE74C3C"/>
                </Button>

                <!-- Bug Report Button -->
                <Button x:Name="BugReportButton"
                        Style="{StaticResource TitleBarButtonStyle}"
                        ToolTipService.ToolTip="Report a Bug">
                    <FontIcon Glyph="&#xEBE8;" FontSize="14"/>
                </Button>
            </StackPanel>
        </Grid>

        <!-- Main Content Area -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>  <!-- NavSidebar -->
                <ColumnDefinition Width="*"/>     <!-- Content -->
            </Grid.ColumnDefinitions>

            <!-- Custom Navigation Sidebar -->
            <controls:NavSidebar x:Name="NavSidebar"
                                 Grid.Column="0"
                                 ItemClicked="NavSidebar_ItemClicked"/>

            <!-- Content Frame for Page Navigation -->
            <Frame x:Name="ContentFrame" Grid.Column="1"/>
        </Grid>

        <!-- Loading Overlay (shown during initialization) -->
        <Grid x:Name="LoadingOverlay"
              Grid.RowSpan="2"
              Background="#80000000"
              Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <ProgressRing IsActive="True" Width="60" Height="60"/>
                <TextBlock Text="Loading..."
                           Margin="0,16,0,0"
                           HorizontalAlignment="Center"
                           FontSize="20"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
