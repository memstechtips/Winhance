<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks">

    <!-- Power Plan Status Indicator Style -->
    <Style x:Key="PowerPlanStatusIndicatorStyle" TargetType="Ellipse" BasedOn="{StaticResource StatusIndicatorStyle}"/>

    <!-- Power Plan ComboBox Item Template -->
    <DataTemplate x:Key="PowerPlanComboBoxItemTemplate">
        <Grid HorizontalAlignment="Stretch">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="28"/>
            </Grid.ColumnDefinitions>

            <Ellipse Grid.Column="0"
                     Fill="{Binding Tag.ExistsOnSystem, Converter={StaticResource PowerPlanStatusToColorConverter}}"
                     Margin="0,0,8,0"
                     VerticalAlignment="Center">
                <Ellipse.ToolTip>
                    <ToolTip Content="{Binding Tag.ExistsOnSystem, Converter={StaticResource PowerPlanStatusToTextConverter}}"/>
                </Ellipse.ToolTip>
                <Ellipse.Style>
                    <Style TargetType="Ellipse" BasedOn="{StaticResource PowerPlanStatusIndicatorStyle}">
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding RelativeSource={RelativeSource AncestorType=ComboBoxItem}}" Value="{x:Null}">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </Ellipse.Style>
            </Ellipse>

            <StackPanel Grid.Column="1"
                        Orientation="Horizontal"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Left">
                <TextBlock Text="{Binding DisplayText}"/>
                <TextBlock Text="[Active]"
                           FontWeight="Bold"
                           Foreground="{DynamicResource AccentColor}"
                           Margin="4,0,0,0">
                    <TextBlock.Style>
                        <Style TargetType="TextBlock">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Tag.IsActive}" Value="True">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </TextBlock.Style>
                </TextBlock>
            </StackPanel>

            <Button Grid.Column="2"
                    Width="20"
                    Height="20"
                    Margin="0"
                    VerticalAlignment="Center"
                    HorizontalAlignment="Center"
                    Command="{Binding Path=DataContext.DeletePowerPlanCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                    CommandParameter="{Binding Tag}"
                    ToolTip="Delete this power plan"
                    Padding="0"
                    Cursor="Hand">
                <Button.Style>
                    <Style TargetType="Button">
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="BorderThickness" Value="0"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="Button">
                                    <Border Background="{TemplateBinding Background}"
                                            BorderThickness="0"
                                            CornerRadius="4"
                                            Padding="{TemplateBinding Padding}">
                                        <ContentPresenter HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"/>
                                    </Border>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="{DynamicResource ButtonBorderBrush}"/>
                            </Trigger>
                        </Style.Triggers>
                    </Style>
                </Button.Style>
                <Button.Visibility>
                    <MultiBinding Converter="{StaticResource PowerPlanDeleteVisibilityConverter}">
                        <Binding Path="Tag.IsActive"/>
                        <Binding Path="Tag.ExistsOnSystem"/>
                    </MultiBinding>
                </Button.Visibility>
                <iconPacks:PackIconMaterial Kind="DeleteForever"
                                           Width="14"
                                           Height="14"
                                           Foreground="{DynamicResource PrimaryTextColor}"/>
            </Button>
        </Grid>
    </DataTemplate>

</ResourceDictionary>
