<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:Winhance.WPF.Features.Common.Converters"
    xmlns:oldConverters="clr-namespace:Winhance.WPF.Converters">

    <converters:CountToVisibilityConverter x:Key="CountToVisibilityConverter"/>
    <converters:InverseCountToVisibilityConverter x:Key="InverseCountToVisibilityConverter"/>

    <oldConverters:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    <converters:InverseBooleanToVisibilityConverter x:Key="InverseBooleanToVisibilityConverter"/>

    <!-- Common tooltip template for registry settings -->
    <DataTemplate x:Key="RegistrySettingTooltipTemplate">
        <StackPanel Visibility="{Binding IndividualRegistryValues.Count, Converter={StaticResource CountToVisibilityConverter}}">

            <!-- Multiple Registry Settings Display (when count > 1) -->
            <StackPanel x:Name="MultipleRegistryDisplay">
                <StackPanel.Style>
                    <Style TargetType="StackPanel">
                        <Setter Property="Visibility" Value="Collapsed"/>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IndividualRegistryValues.Count}" Value="1">
                                <Setter Property="Visibility" Value="Collapsed"/>
                            </DataTrigger>
                            <DataTrigger>
                                <DataTrigger.Binding>
                                    <Binding Path="IndividualRegistryValues.Count">
                                        <Binding.Converter>
                                            <converters:CountToVisibilityConverter/>
                                        </Binding.Converter>
                                    </Binding>
                                </DataTrigger.Binding>
                                <DataTrigger.Value>
                                    <Visibility>Visible</Visibility>
                                </DataTrigger.Value>
                                <Setter Property="Visibility" Value="Visible"/>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </StackPanel.Style>

                <ItemsControl ItemsSource="{Binding IndividualRegistryValues}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="{DynamicResource TooltipBorderBrush}" BorderThickness="1" Padding="8" Margin="0,2" CornerRadius="3" Background="{DynamicResource SettingsItemBackground}">
                                <StackPanel>
                                    <TextBlock FontWeight="SemiBold" Margin="0,0,0,3" Foreground="{DynamicResource PrimaryTextColor}">
                                        <Run Text="Registry Path: "/>
                                        <Run Text="{Binding Key.KeyPath, Mode=OneWay, TargetNullValue='null'}"/>
                                    </TextBlock>
                                    <TextBlock FontWeight="SemiBold" Margin="0,0,0,3" Foreground="{DynamicResource PrimaryTextColor}">
                                        <Run Text="Value Name: "/>
                                        <Run Text="{Binding Key.ValueName, Mode=OneWay, TargetNullValue='(no name)'}"/>
                                    </TextBlock>
                                    <TextBlock FontWeight="SemiBold" Margin="0,0,0,3" Foreground="{DynamicResource PrimaryTextColor}">
                                        <Run Text="Current Value: "/>
                                        <Run Text="{Binding Value, Mode=OneWay, TargetNullValue='(not set)'}"/>
                                    </TextBlock>
                                    <TextBlock FontWeight="SemiBold" Margin="0,0,0,3" Foreground="{DynamicResource PrimaryTextColor}">
                                        <Run Text="Recommended: "/>
                                        <Run Text="{Binding Key.RecommendedValue, Mode=OneWay, TargetNullValue='null'}"/>
                                    </TextBlock>
                                    <TextBlock FontWeight="SemiBold" Margin="0,0,0,3" Foreground="{DynamicResource PrimaryTextColor}" Visibility="{Binding Key.EnabledValue, Converter={StaticResource InverseNullToVisibilityConverter}}">
                                        <Run Text="Enabled: "/>
                                        <Run Text="{Binding Key.EnabledValue, Mode=OneWay, TargetNullValue='null'}"/>
                                    </TextBlock>
                                    <TextBlock FontWeight="SemiBold" Margin="0,0,0,3" Foreground="{DynamicResource PrimaryTextColor}" Visibility="{Binding Key.DisabledValue, Converter={StaticResource InverseNullToVisibilityConverter}}">
                                        <Run Text="Disabled: "/>
                                        <Run Text="{Binding Key.DisabledValue, Mode=OneWay, TargetNullValue='null'}"/>
                                    </TextBlock>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </StackPanel>
    </DataTemplate>

</ResourceDictionary>
